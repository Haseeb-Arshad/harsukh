'use client';   
import React, { useRef, useEffect, useState } from 'react';
import styles from '@/styles/mapview.module.css';

const MapView = () => {
  const containerRef = useRef(null);
  const videoRef = useRef(null);
  const svgRef = useRef(null);
  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });

  useEffect(() => {
    const updateDimensions = () => {
      if (containerRef.current) {
        const { width, height } = containerRef.current.getBoundingClientRect();
        setDimensions({ width, height });
      }
    };

    updateDimensions();
    window.addEventListener('resize', updateDimensions);

    return () => window.removeEventListener('resize', updateDimensions);
  }, []);

  useEffect(() => {
    if (videoRef.current) {
      videoRef.current.playbackRate = 1;
      videoRef.current.play();
    }
  }, []);

  const handleSVGElementClick = (event) => {
    const clickedElement = event.target.closest('[data-name]');
    if (clickedElement) {
      const name = clickedElement.getAttribute('data-name');
      console.log(`Clicked on: ${name}`);
      // Add your click handling logic here
    }
  };

  return (
    <div ref={containerRef} className={styles.container}>
      <video
        ref={videoRef}
        className={styles.video}
        autoPlay
        loop
        muted
        playsInline
        preload="auto"
      >
        <source src="/video/mapView.MOV" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
      <svg
        ref={svgRef}
        className={styles.svgOverlay}
        viewBox="0 0 10000 1800"
        preserveAspectRatio="xMidYMid meet"
        onClick={handleSVGElementClick}
      >
        <defs>
          <style>
            {`
              .cls-1 { fill: #fbf7eb; stroke-width: 0px; }
              .cls-2, .cls-3, .cls-4 { fill: #fff; font-family: GillSansMTPro-Medium, 'Gill Sans MT Pro'; font-size: 75px; font-weight: 500; }
              .cls-5 { stroke-width: 3px; }
              .cls-5, .cls-6 { stroke: #fff; }
              .cls-5, .cls-6, .cls-7 { fill: none; stroke-miterlimit: 10; }
              .cls-7 { stroke: #fbf7eb; stroke-width: 5px; }
            `}
          </style>
        </defs>
        <g id="Layer_2" data-name="Layer 2">
          <polyline className="cls-5" points="151 134.06 151 332.89 191.92 352.8" />
          <path className="cls-1" d="M174.88,44.4c-7.3-6.85-16.86-10.24-26.89-9.61-18.76,1.22-33.46,17.42-33.46,36.89v31.95c0,5.57,4.53,10.11,10.11,10.11h51.46c5.57,0,10.11-4.54,10.11-10.11v-33.08c0-9.87-4.13-19.4-11.33-26.15ZM162.59,42.81c3.09,1.37,5.97,3.23,8.52,5.62.72.67,1.39,1.38,2.03,2.1l-7.74,5.2c-.27-.27-.52-.56-.81-.81-1.84-1.67-3.9-2.95-6.11-3.87,0,0,4.12-8.23,4.12-8.23ZM148.35,40.3c3.06-.21,6.07.06,8.96.73l-4.28,8.57c-1.54-.19-3.12-.23-4.73-.08-.2.02-.38.09-.57.11l-4.28-8.56c1.59-.38,3.22-.66,4.9-.77ZM138.19,42.88l4.14,8.27c-2.55,1.11-4.85,2.7-6.78,4.7l-7.72-5.18c2.86-3.31,6.38-5.98,10.36-7.79h0ZM129.24,108.23h-4.59c-2.53,0-4.59-2.06-4.59-4.59v-4.59h9.19v9.19ZM129.24,93.53h-9.19v-9.19h9.19v9.19ZM129.24,71.34v7.48h-9.19v-7.14c0-.69.05-1.37.1-2.05h9.25c-.04.57-.16,1.13-.16,1.71ZM130.49,64.12h-9.52c.77-3.21,1.99-6.24,3.63-8.98l7.62,5.12c-.69,1.22-1.26,2.51-1.72,3.86ZM165.99,108.23h-31.24v-9.19h31.24v9.19ZM165.99,93.53h-31.24v-22.18c0-8.41,6.18-15.58,14.08-16.34,4.45-.42,8.75.99,12.05,3.99,3.25,2.96,5.12,7.17,5.12,11.56v22.97ZM168.74,60.12l7.64-5.13c1.7,2.83,2.94,5.9,3.63,9.14h-9.52c-.45-1.39-1.03-2.73-1.75-4ZM180.7,103.63c0,2.53-2.06,4.59-4.59,4.59h-4.59v-9.19h9.19v4.59ZM180.7,93.53h-9.19v-9.19h9.19v9.19ZM180.7,78.82h-9.19v-8.27c0-.31-.04-.61-.05-.92h9.19c0,.31.05.61.05.92v8.27ZM160.48,81.58c0,1.52-1.23,2.76-2.76,2.76h-14.7c-1.52,0-2.76-1.23-2.76-2.76s1.23-2.76,2.76-2.76h14.7c1.52,0,2.76,1.23,2.76,2.76ZM143.94,66.88c0-1.52,1.23-2.76,2.76-2.76h7.35c1.52,0,2.76,1.23,2.76,2.76s-1.23,2.76-2.76,2.76h-7.35c-1.52,0-2.76-1.23-2.76-2.76Z" />
          <circle className="cls-7" cx="150.37" cy="74.23" r="61" />
          <text className="cls-3" transform="translate(203.07 409.31)">
            <tspan x="0" y="0">Ayubia Moto </tspan>
            <tspan x="103.76" y="80">Tunnel</tspan>
          </text>
        </g>
        <g id="Layer_7" data-name="Layer 7">
          <text className="cls-4" transform="translate(203.18 409.31)">
            <tspan x="0" y="0">Ayubia Moto </tspan>
            <tspan x="103.76" y="80">Tunnel</tspan>
          </text>
        </g>
      </svg>
    </div>
  );
};

export default MapView;




// const svgContent = `
// <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 10000 10000" preserveAspectRatio="none">
//   <polygon data-image="Penthouse 01" data-tip="penthouse01" class="${styles.st0}" points="333.05 190.04 458.47 136.61 458.47 195.31 471.31 195.31 471.31 190.96 483.69 190.96 483.69 173.99 586.19 173.99 586.19 226.96 598.8 226.96 598.8 223.29 612.1 223.29 612.1 226.96 663.47 226.96 663.47 351.92 611.64 351.92 611.64 439.98 640.76 439.98 640.76 528.25 611.99 528.25 611.87 529.52 605.57 529.52 477.96 529.52 348.98 529.52 348.98 190.73 333.05 190.04" />
//   <polygon data-image="Penthouse 02" data-tip="penthouse02" class="${styles.st0}" points="739.98 261.27 689.22 261.27 689.22 375.92 739.98 375.92 739.98 439.21 711.85 439.21 711.85 530.01 905.61 528.94 905.61 468.18 957.66 468.18 957.66 530.01 1064.28 528.71 1064.28 530.01 1087.67 530.01 1152.56 530.01 1152.56 439.52 1123.67 439.98 1123.67 374.39 1175.03 374.62 1175.03 263.41 1123.9 263.64 1120.23 263.64 1120.23 258.6 1079.18 258.6 1079.18 222.37 784.53 222.37 784.53 258.83 746.47 258.83 746.47 267.54 740.74 267.54 739.98 261.27" />
//   <polygon data-image="Penthouse 03" data-tip="penthouse03" class="${styles.st0}" points="1277.53 303.54 1402.95 362.7 1443.77 362.7 1443.77 345.96 1502.93 345.96 1502.93 362.7 1495.29 362.7 1495.29 375.24 1501.48 375.24 1501.48 408.33 1495.21 408.33 1495.21 420.94 1508.05 420.94 1508.05 412.61 1540.36 412.61 1540.36 473.97 1540.36 529.25 1444.69 529.25 1223.03 529.25 1223.03 440.43 1251.77 440.43 1251.77 425.76 1200.71 425.76 1200.71 329.15 1251.77 329.15 1251.77 375.92 1263.69 375.92 1263.69 368.89 1277.45 368.89 1277.53 303.54" />
//   <polygon data-image="Penthouse 04" data-tip="penthouse04" class="${styles.st0}" points="1223.18 575.26 1223.18 663.54 1251.85 663.54 1251.85 677.3 1200.71 677.3 1200.71 774.06 1251.85 774.06 1251.85 733.94 1276.84 733.94 1276.84 794.47 1404.56 733.94 1443.54 733.94 1443.54 750.22 1503.16 749.99 1503.16 733.94 1508.2 733.94 1508.2 684.87 1539.85 684.87 1539.85 574.34 1351.36 574.34 1252.31 574.34 1223.18 575.26" /> 
//   <polygon data-image="Penthouse 05" data-tip="penthouse05" class="${styles.st0}" points="711.16 575.95 711.16 663.54 740.28 663.54 740.28 722.01 688.92 722.01 688.92 835.98 740.28 835.98 740.28 846.06 784.53 846.06 784.53 868.08 1078.73 868.08 1078.73 840.79 1123.67 840.79 1123.67 835.75 1174.57 835.75 1174.57 724.53 1123.67 724.53 1123.67 663.77 1152.79 663.77 1152.79 574.34 1026.67 574.34 962.47 574.34 962.47 614.7 876.71 614.7 876.71 613.5 874.88 613.5 874.88 574.34 768.88 574.34 768.88 573.48 746.24 573.48 746.24 574.17 739.99 574.17 739.99 576.29 711.16 575.95" />
//   <polygon data-image="Penthouse 06" data-tip="penthouse06" class="${styles.st0}" points="348.79 574.5 357.96 574.5 435.62 574.5 612.33 574.5 612.33 575.87 640.76 575.87 640.76 663.62 611.87 663.62 611.87 752.13 662.32 752.13 662.32 862.8 611.57 862.8 611.57 867.85 599.03 867.85 599.03 863.11 586.34 863.11 586.34 917.07 483.77 917.07 483.77 912.94 470.93 912.94 470.93 907.75 458.09 907.75 458.09 966.75 332.13 912.79 352.76 912.79 352.76 900.02 349.25 900.02 349.25 844.31 349.25 680.51 348.79 574.5" />
// </svg>
// `;


// const svgContent = `
// <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 10000 10000" preserveAspectRatio="none">
//   <polygon data-image="Penthouse 01" data-tip="penthouse01" class="${styles.st0}" points="354.29 450.06 354.29 416.43 354.29 356.2 355.75 356.2 355.75 343.67 354.6 343.67 354.6 273.27 386.24 273.27 386.24 234.06 331.9 234.06 331.9 193.25 336.71 193.25 336.71 190.65 295.29 190.96 294.98 174.9 257.22 175.36 257.22 195.54 244.38 195.54 244.38 190.96 231.85 190.96 231.85 488.13 355.98 488.13 355.98 475.59 354.75 475.59 354.29 475.59 354.29 450.06" />
//   <path data-image="Penthouse 02" data-tip="penthouse02" class="${styles.st0}" d="M473.38,190.65v4.89H460.84v-53L336.71,190.65v2.6H331.9v40.81h54.34v39.21H354.6v70.4h1.15V356.2h-1.46v92.3l.46.07v-.19h37.61v13.3l93.4.15v.09a6.53,6.53,0,0,1,.76-.2V190.65Z" />
//   <polygon data-image="Penthouse 03" data-tip="penthouse03" class="${styles.st0}" points="613.4 444.1 613.4 222.6 600.25 222.6 600.25 227.34 588.33 227.34 588.33 178.88 486.52 178.88 486.52 190.65 486.52 527.57 642.45 527.57 642.45 444.1 613.4 444.1" />
//   <polygon data-image="Penthouse 04" data-tip="penthouse04" class="${styles.st0}" points="911.03 430.65 911.03 390.6 951.24 390.6 951.24 357.88 932.09 357.88 932.09 222.6 785.68 222.6 785.68 258.83 747.39 258.83 747.39 267.54 741.2 267.54 741.2 312.25 741.2 439.29 712.76 439.29 712.76 528.02 734.09 528.02 906.52 528.02 906.52 466.34 951.24 466.34 951.24 430.65 911.03 430.65" /> 
//   <polygon data-image="Penthouse 05" data-tip="penthouse05" class="${styles.st0}" points="711.16 575.95 711.16 663.54 740.28 663.54 740.28 722.01 688.92 722.01 688.92 835.98 740.28 835.98 740.28 846.06 784.53 846.06 784.53 868.08 1078.73 868.08 1078.73 840.79 1123.67 840.79 1123.67 835.75 1174.57 835.75 1174.57 724.53 1123.67 724.53 1123.67 663.77 1152.79 663.77 1152.79 574.34 1026.67 574.34 962.47 574.34 962.47 614.7 876.71 614.7 876.71 613.5 874.88 613.5 874.88 574.34 768.88 574.34 768.88 573.48 746.24 573.48 746.24 574.17 739.99 574.17 739.99 576.29 711.16 575.95" />
//   <polygon data-image="Penthouse 06" data-tip="penthouse06" class="${styles.st0}" points="348.79 574.5 357.96 574.5 435.62 574.5 612.33 574.5 612.33 575.87 640.76 575.87 640.76 663.62 611.87 663.62 611.87 752.13 662.32 752.13 662.32 862.8 611.57 862.8 611.57 867.85 599.03 867.85 599.03 863.11 586.34 863.11 586.34 917.07 483.77 917.07 483.77 912.94 470.93 912.94 470.93 907.75 458.09 907.75 458.09 966.75 332.13 912.79 352.76 912.79 352.76 900.02 349.25 900.02 349.25 844.31 349.25 680.51 348.79 574.5" />
// </svg>
// `;